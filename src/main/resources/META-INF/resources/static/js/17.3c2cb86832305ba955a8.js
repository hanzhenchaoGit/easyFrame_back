webpackJsonp([17],{"4j1l":function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},a306:function(n,t,e){var o=e("4j1l");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);e("rjj0")("5061f77c",o,!0)},sxVZ:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("Dd8w"),s=e.n(o),l=e("NYxO"),i={name:"ConsultList",components:{consultManager:e("p3JC").default},data:function(){return{window:{addWindow:!1,watchFlow:!1},img:{baseFlowImgUrl:this.baseUrl+"/activiti/getFlowImage",watchFlowImg:""},data:{consult:{},operate:"",selectedIds:""},table:{consult:{formOptions:{formType:"simple",inline:!0,showResetBtn:!0,showSearchBtn:!0,submitBtnText:"查询",resetBtnText:"重置",forms:[{prop:"zxbh",label:"咨询编号"},{prop:"jcxm",label:"咨询内容"},{prop:"zxly",label:"咨询来源",itemType:"select",url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sources"},{prop:"zxlylx",label:"咨询类型",itemType:"select",url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sourcesType"},{prop:"zxzt",label:"咨询状态",itemType:"select",url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=zxzt"}]},url:"consult/getMyConsultByPager",columns:[{colType:"selection"},{prop:"zxbh",label:"咨询编号",width:170,showOverflowTooltip:!0},{prop:"createtime",label:"咨询时间",width:140},{prop:"zxlyname",label:"咨询来源"},{prop:"zxlylxname",label:"咨询类型"},{prop:"qymc",label:"企业名称"},{prop:"jcxm",label:"咨询内容"},{prop:"kfrymc",label:"客服人员"},{prop:"fpksmc",label:"分配科室",width:200},{prop:"xsrymc",label:"销售人员"},{prop:"zxztname",label:"咨询状态"},{prop:"thyy",label:"退回原因",showOverflowTooltip:!0},{slotName:"operate",width:250}]}}}},computed:s()({},Object(l.b)(["consultEditWindowShow"])),methods:{refreshTable:function(){this.setWindowStatus(!1),this.$refs.table.searchHandler()},pushSelected:function(n,t){this.$set(this.data,"selectedIds",n.map(function(n){return n.id}))},checkboxFun:function(n,t){return"1"!==n.istj},commitSelected:function(){var n=this;this.data.selectedIds?this.$request({url:"consult/commitXmxxZxxx",method:"post",params:{ids:this.data.selectedIds.toString()}}).then(function(t){n.returnMsg(n,t),n.$refs.table.searchHandler()}):this.$message({message:"请选择要提交的咨询",type:"error"})},edit:function(n,t){this.$set(this.data,"consult",n),this.$set(this.data,"operate",t),this.setWindowStatus(!0)},setWindowStatus:function(n){this.$store.dispatch("setShowEditWindow",n)},showWatchFlow:function(n){this.$set(this.img,"watchFlowImg",this.img.baseFlowImgUrl+"?id="+n.insid+"&"+new Date),this.window.watchFlow=!0}}},c={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("el-dialog",{attrs:{title:"咨询信息",fullscreen:"",visible:n.consultEditWindowShow,width:"100%"},on:{"update:visible":function(t){n.consultEditWindowShow=t},close:function(t){n.refreshTable()}}},[e("consultManager",{attrs:{editConsult:n.data.consult,from:"window",operate:n.data.operate}})],1),n._v(" "),e("el-dialog",{attrs:{title:"咨询流程",visible:n.window.watchFlow},on:{"update:visible":function(t){n.$set(n.window,"watchFlow",t)}}},[e("img",{staticStyle:{width:"100%"},attrs:{src:n.img.watchFlowImg}})]),n._v(" "),e("common-table",{ref:"table",attrs:{autoLoad:"","show-overflow-tooltip":"",url:n.table.consult.url,formOptions:n.table.consult.formOptions,columns:n.table.consult.columns,checkboxFun:n.checkboxFun,fit:""},on:{select:n.pushSelected},scopedSlots:n._u([{key:"buttons",fn:function(t){return[e("common-button",{attrs:{svgIcon:"commit",type:"primary",plain:""},on:{click:n.commitSelected}},[n._v("提交")])]}},{key:"operate",fn:function(t){return[t.row.insid?e("common-button",{attrs:{type:"primary"},on:{click:function(e){n.showWatchFlow(t.row)}}},[n._v("查看咨询进程")]):n._e(),n._v(" "),""===t.row.istj||null===t.row.istj||"2"===t.row.zxzt?e("common-button",{attrs:{type:"primary"},on:{click:function(e){n.edit(t.row,"edit")}}},[n._v("编辑")]):e("common-button",{attrs:{type:"primary"},on:{click:function(e){n.edit(t.row,"watch")}}},[n._v("查看")])]}}])})],1)},staticRenderFns:[]};var a=e("VU/8")(i,c,!1,function(n){e("a306")},"data-v-8bc1ce82",null);t.default=a.exports}});