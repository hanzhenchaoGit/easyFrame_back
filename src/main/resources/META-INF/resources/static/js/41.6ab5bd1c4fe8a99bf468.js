webpackJsonp([41],{ztDG:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("woOf"),a=o.n(n),r=o("vLgD"),s={data:function(){return{window:{logWindow:!1},addWindow:!1,taskForm:{id:null,name:"",group:"",description:"",corn:"",jobClass:"",createtime:"",createuserid:"",updatetime:"",updateuserid:"",enabled:""},taskList:[],url:"/system/getSysTaskByPager",formOptions:{inline:!0,showResetBtn:!0,showSearchBtn:!0,submitBtnText:"查询",resetBtnText:"重置",forms:[{prop:"name",label:"作业名称"}]},columns:[{colType:"selection"},{prop:"name",label:"作业名称"},{prop:"group",label:"作业组",width:120},{prop:"description",label:"描述",showOverflowTooltip:!0},{prop:"corn",label:"corn表达式",width:120},{prop:"jobClass",label:"作业类",showOverflowTooltip:!0},{slotName:"state",label:"作业状态",width:100},{prop:"enabled",label:"是否可用",width:100},{label:"操作",slotName:"edit"}]}},mounted:function(){},methods:{handleAdd:function(e,t){void 0!==this.$refs[e]&&this.$refs[e].resetFields(),this[t]=!0},handleSelect:function(e,t){this.taskList=a()([],e)},excuteOperate:function(e){var t=this,o=[];"resumeAll"!==e&&"pauseAll"!==e&&(o=this.taskList),Object(r.a)({url:"/system/operateSysTask",method:"post",params:{operate:e},data:o}).then(function(e){t.returnMsg(t,e),t.$refs.table.fetchHandler()})},save:function(){var e=this;this.$refs.form.validate(function(t){var o=e.taskForm;if(!t)return!1;Object(r.a)({url:"/system/addSysTask",method:"post",data:o}).then(function(t){e.returnMsg(e,t),e.$refs.table.fetchHandler()})})},handleEdit:function(e,t){var o=this;this.addWindow=!0,setTimeout(function(){o.$refs.form.resetFields(),o.taskForm=a()({},t)},1)},hanleDel:function(e){var t=this;Object(r.a)({url:"/system/delSysTask",params:{id:e.id}}).then(function(e){t.returnMsg(t,e),t.$refs.table.fetchHandler()})}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-card",[o("el-dialog",{attrs:{visible:e.addWindow,width:"40%","close-on-click-modal":"","close-on-press-escape":""},on:{"update:visible":function(t){e.addWindow=t}}},[o("el-form",{ref:"form",attrs:{inline:"",model:e.taskForm,"label-width":"120px","label-position":"left"}},[o("el-form-item",{attrs:{prop:"id",label:"id"}},[o("el-input",{attrs:{disabled:""},model:{value:e.taskForm.id,callback:function(t){e.$set(e.taskForm,"id",t)},expression:"taskForm.id"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"name",label:"作业名",required:""}},[o("el-input",{model:{value:e.taskForm.name,callback:function(t){e.$set(e.taskForm,"name",t)},expression:"taskForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"group",label:"作业组",required:""}},[o("el-input",{model:{value:e.taskForm.group,callback:function(t){e.$set(e.taskForm,"group",t)},expression:"taskForm.group"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"description",label:"作业描述",required:""}},[o("el-input",{model:{value:e.taskForm.description,callback:function(t){e.$set(e.taskForm,"description",t)},expression:"taskForm.description"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"corn",label:"corn表达式",required:""}},[o("el-input",{model:{value:e.taskForm.corn,callback:function(t){e.$set(e.taskForm,"corn",t)},expression:"taskForm.corn"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"jobClass",label:"作业类",required:""}},[o("el-input",{model:{value:e.taskForm.jobClass,callback:function(t){e.$set(e.taskForm,"jobClass",t)},expression:"taskForm.jobClass"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"enabled",label:"是否可用",required:""}},[o("el-select",{model:{value:e.taskForm.enabled,callback:function(t){e.$set(e.taskForm,"enabled",t)},expression:"taskForm.enabled"}},[o("el-option",{key:"Y",attrs:{label:"可用",value:"Y"}}),e._v(" "),o("el-option",{key:"N",attrs:{label:"不可用",value:"N"}})],1)],1),e._v(" "),o("el-form-item",[o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("保存")]),e._v(" "),o("common-button",{attrs:{type:"primary"}},[e._v("重置")]),e._v(" "),o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.addWindow=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"作业日志",visible:e.window.logWindow,width:"50%","close-on-click-modal":"","close-on-press-escape":""},on:{"update:visible":function(t){e.$set(e.window,"logWindow",t)}}},[o("common-table",{ref:"logTable"})],1),e._v(" "),o("common-table",{ref:"table",attrs:{url:e.url,columns:e.columns,fit:"",autoLoad:"",formOptions:e.formOptions},on:{select:e.handleSelect},scopedSlots:e._u([{key:"edit",fn:function(t){return[o("common-button",{on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("common-button",{attrs:{type:"danger"},on:{click:function(o){e.hanleDel(t.row)}}},[e._v("删除")]),e._v(" "),o("common-button",[o("svg-icon",{attrs:{"icon-class":"log"}}),e._v("日志")],1)]}},{key:"state",fn:function(t){return["NORMAL"===t.row.state?o("el-tag",{attrs:{type:"success"}},[e._v("NORMAL")]):e._e(),e._v(" "),"PAUSED"===t.row.state?o("el-tag",{attrs:{type:"warning"}},[e._v("PAUSED")]):e._e(),e._v(" "),"NONE"===t.row.state?o("el-tag",{attrs:{type:"info"}},[e._v("NONE")]):e._e()]}},{key:"buttons",fn:function(t){return[o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd("form","addWindow")}}},[e._v("新增")]),e._v(" "),o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.excuteOperate("add")}}},[e._v("加入任务池")]),e._v(" "),o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.excuteOperate("pause")}}},[e._v("暂停")]),e._v(" "),o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.excuteOperate("resume")}}},[e._v("恢复")]),e._v(" "),o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.excuteOperate("pauseAll")}}},[e._v("暂停所有")]),e._v(" "),o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.excuteOperate("resumeAll")}}},[e._v("恢复所有")])]}}])})],1)],1)},staticRenderFns:[]},i=o("VU/8")(s,l,!1,null,null,null);t.default=i.exports}});