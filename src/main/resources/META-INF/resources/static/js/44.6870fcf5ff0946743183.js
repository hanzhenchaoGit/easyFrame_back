webpackJsonp([44],{"ny+C":function(e,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=s("woOf"),t=s.n(r),a=s("7+uW"),c=s("vHhr"),d=s("HHBG"),n={components:{Sticky:c.a,commonSelect:d.a},name:"postAddress",mounted:function(){},data:function(){return{save2:!0,save1:!0,addWindow:!1,currentRow:[],compaddressForm:{},url:"/compname_address/findAllCompAddressByPage",corpidtype:[{name:"A",value:"A"},{name:"B",value:"B"},{name:"C",value:"C"},{name:"D",value:"D"},{name:"E",value:"E"},{name:"F",value:"F"}],rules:{compname:[{required:!0,message:"请输入公司名称"},{min:1,max:50,message:"长度在 1 到 10 个字符",trigger:"blur"}],country:[{required:!0,message:"请输入所在国家"},{min:1,max:20,message:"长度在 1 到 10 个字符",trigger:"blur"}],province:[{required:!0,message:"请选择所在省份"}],city:[{required:!0,message:"请选择所在城市"}],compaddress:[{required:!0,message:"请输入详细地址"},{min:1,max:200,message:"长度在1到200个字符",trigger:"blur"}],corpid:[{required:!0,message:"请选择品牌"}]},select:{receiveprovince:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=1"},receivecity:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=2"}},columns:[{prop:"id",label:"序号"},{prop:"compname",label:"寄件公司名称"},{prop:"country",label:"国家"},{prop:"province",label:"省"},{prop:"city",label:"市"},{prop:"compaddress",label:"详细地址"},{label:"操作",slotName:"edit",width:300}]}},methods:{checkAble:function(e,o){},selectRow:function(e,o){this.currentRow=t()([],e),this.currentRow=this.currentRow.map(function(e){return e.id})},save:function(){var e=this;this.$refs.form.validate(function(o){if(console.log(o),o){e.addWindow=!1,a.default.set(e.compaddressForm,"country","中国");var s=e.compaddressForm;e.$request({url:"/compname_address/addCompnameAddress",method:"post",data:s}).then(function(o){o.data?e.$refs.table.fetchHandler():e.$message({showClose:!0,message:"该公司和地址已存在",type:"warning"})})}})},updateCompInfo:function(){var e=this;this.$refs.form.validate(function(o){e.addWindow=!1;var s=e.compaddressForm;e.$request({url:"/compname_address/updateCompAddressInfo",method:"post",data:s}).then(function(o){o.data&&e.$refs.table.fetchHandler()})})},getCs:function(e,o){a.default.set(this.compaddressForm,"receivecity",""),this.$refs.receivecity.loadData("pid="+o)},checkCs:function(){this.compaddressForm.province||(a.default.set(this.compaddressForm,"receivecity",""),this.$message({type:"warning",message:"请先选择省份"}))},add:function(){var e=this;setTimeout(function(){e.$refs.form.resetFields(),e.compaddressForm={}},1),this.$set(this,"addWindow",!0),this.$set(this,"save2",!1),this.$set(this,"save1",!0)},update:function(e,o){var s=this;this.$set(this,"addWindow",!0),this.$set(this,"save1",!1),this.$set(this,"save2",!0),console.log(o.id),this.$request({url:"/compname_address/findUpdateInfoById",method:"get",params:{ID:o.id}}).then(function(e){e.data?(console.log(22334),a.default.set(s,"compaddressForm",e.data)):s.$message({showClose:!0,message:"查看失败",type:"warning"})})}}},m={render:function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",[s("el-card",[s("el-dialog",{attrs:{visible:e.addWindow,width:"20%","close-on-click-modal":"","close-on-press-escape":""},on:{"update:visible":function(o){e.addWindow=o}}},[s("el-form",{ref:"form",attrs:{model:e.compaddressForm,rules:e.rules}},[s("el-row",[s("el-col",[s("el-form-item",{attrs:{prop:"corpid",label:"品牌"}},[s("commonSelect",{attrs:{data:e.corpidtype},model:{value:e.compaddressForm.corpid,callback:function(o){e.$set(e.compaddressForm,"corpid",o)},expression:"compaddressForm.corpid"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{prop:"compname",label:"寄件公司名称"}},[s("el-input",{model:{value:e.compaddressForm.compname,callback:function(o){e.$set(e.compaddressForm,"compname",o)},expression:"compaddressForm.compname"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{prop:"country",label:"国家"}},[s("el-input",{model:{value:e.compaddressForm.country,callback:function(o){e.$set(e.compaddressForm,"country",o)},expression:"compaddressForm.country"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{prop:"province",label:"省"}},[s("common-select",{attrs:{url:e.select.receiveprovince.url,required:""},on:{change:e.getCs},model:{value:e.compaddressForm.province,callback:function(o){e.$set(e.compaddressForm,"province",o)},expression:"compaddressForm.province"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{prop:"city",label:"市"}},[s("common-select",{ref:"receivecity",attrs:{cascadingValue:e.compaddressForm.city,cascadingKey:"pid",url:e.select.receivecity.url,required:""},on:{change:e.checkCs},model:{value:e.compaddressForm.city,callback:function(o){e.$set(e.compaddressForm,"city",o)},expression:"compaddressForm.city"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{prop:"compaddress",label:"详细信息"}},[s("el-input",{model:{value:e.compaddressForm.compaddress,callback:function(o){e.$set(e.compaddressForm,"compaddress",o)},expression:"compaddressForm.compaddress"}})],1)],1)],1),e._v(" "),e.save1?s("common-button",{attrs:{type:"primary"},on:{click:function(o){e.save()}}},[e._v("保存")]):e._e(),e._v(" "),e.save2?s("common-button",{attrs:{type:"primary"},on:{click:function(o){e.updateCompInfo()}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),s("common-button",{attrs:{type:"primary"},on:{click:function(o){e.add()}}},[e._v("新增")]),e._v(" "),s("common-table",{ref:"table",attrs:{url:e.url,"highlight-current-row":"",checkboxFun:e.checkAble,columns:e.columns,fit:"",autoLoad:""},on:{select:e.selectRow},scopedSlots:e._u([{key:"edit",fn:function(o){return[s("common-button",{on:{click:function(s){e.update(o.$index,o.row)}}},[e._v("编辑")])]}}])})],1)],1)},staticRenderFns:[]},i=s("VU/8")(n,m,!1,null,null,null);o.default=i.exports}});