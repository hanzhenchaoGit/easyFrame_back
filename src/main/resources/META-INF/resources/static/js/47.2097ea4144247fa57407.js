webpackJsonp([47],{TXWE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("7+uW"),n=s("vHhr"),o=s("HHBG"),a={components:{Sticky:n.a,commonSelect:o.a},mounted:function(){},data:function(){return{isShow:!1,isEnable:!0,radio:"1",foodsForm:{},taskList:[],currentRow:[],inputwidth:"120",url:"/KDInfo/getKdinfoByPager",formOptions:{formType:"simple",inline:!0,showResetBtn:!0,showSearchBtn:!0,submitBtnText:"查询",resetBtnText:"重置",forms:[{prop:"status",label:"请求类型",itemType:"select",url:"/system/proxyExcute?uuid=f23e0348-de38-4bb4-93fb-7a2354b1eb54"}]},xldata:{kdtype:[{name:"文件类",value:"文件类"},{name:"样品类",value:"样品类"},{name:"其他类",value:"其他类"}],foldernotype:[{name:"委托单号",value:"委托单号"},{name:"咨询编号(未下单)",value:"咨询编号(未下单)"},{name:"非客户相关的快递",value:"非客户相关的快递"}],posttype:[{name:"顺丰特惠",value:"顺丰特惠"},{name:"顺丰标快",value:"顺丰标快"},{name:"顺丰次晨",value:"顺丰次晨"},{name:"顺丰即日",value:"顺丰即日"}]},rules:{cusname:[{required:!0,message:"请输入部门名称"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],orgname:[{required:!0,message:"请输入员工名称"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],ordnum:[{required:!0,message:"请输入订餐数量"}]},columns:[{prop:"id",label:"ID"},{prop:"folderno",label:"委托单号"},{prop:"zxno",label:"咨询编号"},{prop:"postdate",label:"发起时间"},{prop:"receivecompname",label:"收件公司/人"},{prop:"kddetail",label:"快递内容"},{prop:"dispstatus",label:"登记状态"},{prop:"reason",label:"原因"},{label:"操作",slotName:"edit",width:300}],select:{postcompname:{url:"system/proxyExcute?uuid=1296816f-00b6-4103-8122-9eda1bc3d084"},receiveprovince:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=1"},receivecity:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=2"},postaddress:{url:"system/proxyExcute?uuid=284219ff-ce8f-45c3-81a4-7b8de1a754fa"},kdAdmin:{url:"system/proxyExcute?uuid=1c7cdd05-1ab5-403b-addd-aab8f2456d00"},default:{url:"system/proxyExcute?uuid=1c7cdd05-1ab5-403b-addd-aab8f2456d00"}},entity:{consult:{}}}},methods:{selectRow:function(e,t){},save:function(){var e=this;this.$refs.form.validate(function(t){e.addWindow=!1;var s=e.entity.consult;e.$request({url:"/KDInfo/updateKDInfo",method:"post",data:s}).then(function(t){t.data&&e.$refs.table.fetchHandler()})})},showInfo:function(e,t){var s=this;this.$set(this,"isShow",!0),this.$set(this,"isEnable",!0),this.$request({url:"/KDInfo/FindKDInfoByID",method:"get",params:{ID:t.id}}).then(function(e){e.data?(l.default.set(s.entity.consult,"postaddress",""),s.$refs.postaddress.loadData("pid="+e.data.sid),l.default.set(s.entity,"consult",e.data)):s.$message({showClose:!0,message:"查看失败",type:"warning"})})},updateInfo:function(e,t){var s=this;this.$set(this,"isShow",!0),this.$set(this,"isEnable",!1),this.$request({url:"/KDInfo/FindKDInfoByID",method:"get",params:{ID:t.id}}).then(function(e){e.data?(l.default.set(s.entity.consult,"postaddress",""),s.$refs.postaddress.loadData("pid="+e.data.sid),l.default.set(s.entity,"consult",e.data)):s.$message({showClose:!0,message:"查看失败",type:"warning"})})},gotoPostKDPage:function(){this.$router.push("PostKD")},gotoAcceptPage:function(){this.$router.push("AcceptKD")},getCs:function(e,t){l.default.set(this.entity.consult,"receivecity",""),this.$refs.receivecity.loadData("pid="+t)},checkCs:function(){this.entity.consult.receiveprovince||(l.default.set(this.entity.consult,"receivecity",""),this.$message({type:"warning",message:"请先选择省份"}))},choseAddress:function(e,t){l.default.set(this.entity.consult,"postaddress",""),this.$refs.postaddress.loadData("pid="+t)},choseKDType:function(e){this.selVal=e,"1"===e&&console.log("成功")},recall:function(e,t){var s=this;this.$confirm("确定要撤回吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$request({url:"/KDInfo/deleteKdInfo",method:"get",params:{ID:t.id}}).then(function(e){e.data?s.$refs.table.fetchHandler():s.$message({showClose:!0,message:"查看失败",type:"warning"})})}).catch(function(){})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",[s("common-table",{ref:"table",attrs:{url:e.url,"highlight-current-row":"",columns:e.columns,fit:"",autoLoad:"",formOptions:e.formOptions},on:{"selection-change":e.selectRow},scopedSlots:e._u([{key:"edit",fn:function(t){return["未处理"===t.row.dispstatus||"等待寄送"===t.row.dispstatus||"已寄送"===t.row.dispstatus||"寄送失败"===t.row.dispstatus||"管理员退回"===t.row.dispstatus||"处理中"===t.row.dispstatus||"等待取件"===t.row.dispstatus?s("common-button",{on:{click:function(s){e.showInfo(t.$index,t.row)}}},[e._v("查看")]):e._e(),e._v(" "),"未处理"===t.row.dispstatus?s("common-button",{on:{click:function(s){e.updateInfo(t.$index,t.row)}}},[e._v("修改")]):e._e(),e._v(" "),"未处理"===t.row.dispstatus?s("common-button",{on:{click:function(s){e.recall(t.$index,t.row)}}},[e._v("撤回")]):e._e()]}}])})],1),e._v(" "),s("el-card",[s("el-row",[s("el-col",{attrs:{span:12}},[s("common-button",{attrs:{type:"primary"},on:{click:function(t){e.gotoPostKDPage()}}},[e._v("新发快递")])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("common-button",{attrs:{type:"primary"},on:{click:function(t){e.gotoAcceptPage()}}},[e._v("新收快递")])],1)],1)],1),e._v(" "),e.isShow?s("el-card",[s("el-form",{ref:"form",attrs:{model:e.entity.consult,"label-width":"80px",disabled:e.isEnable}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("span",[e._v("发起时间:")]),e._v(" "),s("span",[e._v(e._s(e.entity.consult.postdate))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",[e._v("所属科室:")]),e._v(" "),s("span",[e._v(e._s(e.entity.consult.ksname))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",[e._v("发起人:")]),e._v(" "),s("span",[e._v(e._s(e.entity.consult.postperson))])])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("span",[e._v("快递单号:")]),e._v(" "),s("span",[e._v(e._s(e.entity.consult.folderno))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",[e._v("咨询编号:")]),e._v(" "),s("span")]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",[e._v("审核管理员:")]),e._v(" "),s("span")])],1),e._v(" "),s("label",[e._v("寄件信息")]),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"寄件公司","label-width":"100px"}},[s("common-select",{attrs:{url:e.select.postcompname.url,required:""},on:{change:e.choseAddress},model:{value:e.entity.consult.postcompname,callback:function(t){e.$set(e.entity.consult,"postcompname",t)},expression:"entity.consult.postcompname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人","label-width":"100px"}},[s("el-input",{model:{value:e.entity.consult.postperson,callback:function(t){e.$set(e.entity.consult,"postperson",t)},expression:"entity.consult.postperson"}}),e._v(" "),s("el-input",{attrs:{type:"hidden"},model:{value:e.entity.consult.id,callback:function(t){e.$set(e.entity.consult,"id",t)},expression:"entity.consult.id"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"寄送地址","label-width":"100px"}},[s("common-select",{ref:"postaddress",attrs:{cascadingValue:e.entity.consult.postcompname,cascadingKey:"pid",url:e.select.postaddress.url,required:""},model:{value:e.entity.consult.postaddress,callback:function(t){e.$set(e.entity.consult,"postaddress",t)},expression:"entity.consult.postaddress"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系电话","label-width":"100px"}},[s("el-input",{model:{value:e.entity.consult.contactphone,callback:function(t){e.$set(e.entity.consult,"contactphone",t)},expression:"entity.consult.contactphone"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"托寄物类型","label-width":"100px"}},[s("commonSelect",{attrs:{data:e.xldata.kdtype},model:{value:e.entity.consult.kdtype,callback:function(t){e.$set(e.entity.consult,"kdtype",t)},expression:"entity.consult.kdtype"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"托寄物详情","label-width":"100px"}},[s("el-input",{model:{value:e.entity.consult.kddetail,callback:function(t){e.$set(e.entity.consult,"kddetail",t)},expression:"entity.consult.kddetail"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:5}},[s("el-select",{staticStyle:{left:"100px"},attrs:{placeholder:""},model:{value:e.entity.consult.foldernotype,callback:function(t){e.$set(e.entity.consult,"foldernotype",t)},expression:"entity.consult.foldernotype"}},[s("el-option",{attrs:{label:"委托单号",value:"委托单号"}}),e._v(" "),s("el-option",{attrs:{label:"咨询编号(未下单)",value:"咨询编号(未下单)"}}),e._v(" "),s("el-option",{attrs:{label:"非客户相关的快递",value:"非客户相关的快递"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-input",{attrs:{placeholder:"如果未产生委托单号的客户，请选择客户编号"},model:{value:e.entity.consult.folderno,callback:function(t){e.$set(e.entity.consult,"folderno",t)},expression:"entity.consult.folderno"}})],1)],1),e._v(" "),s("label",[e._v("收件信息")]),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"公司名称","label-width":"100px"}},[s("el-input",{model:{value:e.entity.consult.receivecompname,callback:function(t){e.$set(e.entity.consult,"receivecompname",t)},expression:"entity.consult.receivecompname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人","label-width":"100px"}},[s("el-input",{model:{value:e.entity.consult.receiveperson,callback:function(t){e.$set(e.entity.consult,"receiveperson",t)},expression:"entity.consult.receiveperson"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系电话","label-width":"100px"}},[s("el-input",{model:{value:e.entity.consult.receivephone,callback:function(t){e.$set(e.entity.consult,"receivephone",t)},expression:"entity.consult.receivephone"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"收货地址(省)","label-width":"100px"}},[s("common-select",{attrs:{url:e.select.receiveprovince.url,required:""},on:{change:e.getCs},model:{value:e.entity.consult.receiveprovince,callback:function(t){e.$set(e.entity.consult,"receiveprovince",t)},expression:"entity.consult.receiveprovince"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"收货地址(市)","label-width":"100px"}},[s("common-select",{ref:"receivecity",attrs:{cascadingValue:e.entity.consult.receiveprovince,cascadingKey:"pid",url:e.select.receivecity.url,required:""},on:{change:e.checkCs},model:{value:e.entity.consult.receivecity,callback:function(t){e.$set(e.entity.consult,"receivecity",t)},expression:"entity.consult.receivecity"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"详细地址","label-width":"100px"}},[s("el-input",{model:{value:e.entity.consult.receiveaddress,callback:function(t){e.$set(e.entity.consult,"receiveaddress",t)},expression:"entity.consult.receiveaddress"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"付款方式","label-width":"100px"}},[s("el-radio",{attrs:{label:"月结"},model:{value:e.entity.consult.paytype,callback:function(t){e.$set(e.entity.consult,"paytype",t)},expression:"entity.consult.paytype"}},[e._v("月结")]),e._v(" "),s("el-radio",{attrs:{label:"到付"},model:{value:e.entity.consult.paytype,callback:function(t){e.$set(e.entity.consult,"paytype",t)},expression:"entity.consult.paytype"}},[e._v("到付")])],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"邮寄方式","label-width":"100px"}},[s("commonSelect",{attrs:{data:e.xldata.posttype},model:{value:e.entity.consult.posttype,callback:function(t){e.$set(e.entity.consult,"posttype",t)},expression:"entity.consult.posttype"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"快递费","label-width":"100px"}},[s("el-input",{ref:"input1",attrs:{type:"text",value:""},model:{value:e.entity.consult.postage,callback:function(t){e.$set(e.entity.consult,"postage",t)},expression:"entity.consult.postage"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"选择快递管理员","label-width":"120px"}},[s("common-select",{attrs:{url:e.select.kdAdmin.url,required:""},model:{value:e.entity.consult.kdadmin,callback:function(t){e.$set(e.entity.consult,"kdadmin",t)},expression:"entity.consult.kdadmin"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("common-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("保存")])],1)],1)],1)],1):e._e()],1)},staticRenderFns:[]},c=s("VU/8")(a,i,!1,null,null,null);t.default=c.exports}});