webpackJsonp([53],{WO8z:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("woOf"),r=o.n(a),l=o("vLgD"),n={data:function(){return{addWindow:!1,dataSourceWindow:!1,dataSourceForm:{id:null,name:"",url:"",username:"",password:"",driver:""},tableNameUrl:"/system/proxyExcute?uuid=8c010037-6df3-4d69-be32-e61f7a8dbcc1",codeForm:{createtime:null,datasourceId:1,genType:"",id:null,author:"",module:"",queryParams:"",tableName:""},url:"/system/getSysCodegenConfigByPager",formOptions:{inline:!0,showResetBtn:!0,submitBtnText:"查询",resetBtnText:"重置",forms:[{prop:"name",label:"Name"},{prop:"type",label:"请求类型",itemType:"select",options:[{value:"",label:"All"},{value:"sql",label:"sql"},{value:"class",label:"class"}]}]},columns:[{colType:"selection"},{prop:"id",label:"id",width:50},{prop:"module",label:"模块标识",width:100},{prop:"tableName",label:"表名",width:180},{prop:"author",label:"作者",width:80},{prop:"outpath",label:"输出路径",width:80},{prop:"genType",label:"代码类型(增删改查选择)",width:260},{prop:"queryParams",label:"查询参数",width:260,showOverflowTooltip:!0},{prop:"datasourceId",label:"数据源Id",width:80},{prop:"createtime",label:"创建时间"},{prop:"test",label:"操作",slotName:"edit",width:200}],dataSources:[],generateCodeList:[],tables:[]}},computed:{},mounted:function(){this.getDataSources(),this.getTables()},methods:{saveDataSource:function(){var e=this,t=this.dataSourceForm;Object(l.a)({url:"/system/addSysDatasource",method:"post",data:t}).then(function(t){e.returnMsg(e,t),e.getDataSources()})},delDataSource:function(e){var t=this;Object(l.a)({url:"/system/delSysDatasource",params:{id:e}}).then(function(e){t.returnMsg(t,e),t.getDataSources()})},handleAdd:function(e,t){void 0!==this.$refs[e]&&(this.$refs[e].resetFields(),console.log("rest sss")),this[t]=!0},getTables:function(){var e=this;Object(l.a)({url:"/system/proxyExcute?uuid=8c010037-6df3-4d69-be32-e61f7a8dbcc1",method:"get"}).then(function(t){e.tables=t.data})},getDataSources:function(){var e=this;Object(l.a)({url:"/system/getSysDatasourceList",method:"get"}).then(function(t){e.dataSources=t.data})},handleSelect:function(e,t){console.log(e,t),this.generateCodeList=r()([],e)},generateCode:function(){var e=this.generateCodeList;Object(l.a)({url:"/system/generatorCode",method:"post",data:e}).then(function(e){console.log(e)})},save:function(){var e=this;this.$refs.form.validate(function(t){e.codeForm.genType instanceof Array&&(e.codeForm.genType=e.codeForm.genType.join(","));var o=e.codeForm;if(!t)return!1;Object(l.a)({url:"/system/addSysCodegenConfig",method:"post",data:o}).then(function(t){e.returnMsg(e,t),e.codeForm.genType instanceof Array||(e.codeForm.genType=e.codeForm.genType.split(",")),e.$refs.table.fetchHandler()})})},handleEdit:function(e,t){this.codeForm=r()({},t),this.codeForm.genType=this.codeForm.genType.split(","),this.addWindow=!0},hanleDel:function(e){var t=this;Object(l.a)({url:"/system/delSysCodegenConfig",params:{id:e.id}}).then(function(e){t.returnMsg(t,e),t.$refs.table.fetchHandler()})}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{visible:e.dataSourceWindow,width:"36%","close-on-click-modal":"","close-on-press-escape":""},on:{"update:visible":function(t){e.dataSourceWindow=t}}},[o("el-form",{ref:"dataSourceForm",attrs:{inline:"",model:e.dataSourceForm,"label-width":"120px","label-position":"left"}},[o("el-form-item",{attrs:{prop:"id",label:"id"}},[o("el-input",{attrs:{disabled:""},model:{value:e.dataSourceForm.id,callback:function(t){e.$set(e.dataSourceForm,"id",t)},expression:"dataSourceForm.id"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"name",label:"数据源名称",required:""}},[o("el-input",{model:{value:e.dataSourceForm.name,callback:function(t){e.$set(e.dataSourceForm,"name",t)},expression:"dataSourceForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"url",label:"数据源url",required:""}},[o("el-input",{staticStyle:{width:"460px"},model:{value:e.dataSourceForm.url,callback:function(t){e.$set(e.dataSourceForm,"url",t)},expression:"dataSourceForm.url"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"username",label:"用户名",required:""}},[o("el-input",{model:{value:e.dataSourceForm.username,callback:function(t){e.$set(e.dataSourceForm,"username",t)},expression:"dataSourceForm.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password",label:"密码",required:""}},[o("el-input",{model:{value:e.dataSourceForm.password,callback:function(t){e.$set(e.dataSourceForm,"password",t)},expression:"dataSourceForm.password"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"driver",label:"驱动",required:""}},[o("el-input",{model:{value:e.dataSourceForm.driver,callback:function(t){e.$set(e.dataSourceForm,"driver",t)},expression:"dataSourceForm.driver"}})],1),e._v(" "),o("el-form-item",e._l(e.dataSources,function(t){return o("el-tag",{key:t.id,attrs:{closable:""},on:{close:function(o){e.delDataSource(t.id)}}},[e._v("\n          "+e._s(t.name)+"："+e._s(t.url)+":"+e._s(t.username)+":"+e._s(t.password)+"\n        ")])})),e._v(" "),o("el-form-item",[o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.saveDataSource()}}},[e._v("保存")]),e._v(" "),o("common-button",{on:{click:function(t){e.dataSourceWindow=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{visible:e.addWindow,width:"60%","close-on-click-modal":"","close-on-press-escape":""},on:{"update:visible":function(t){e.addWindow=t}}},[o("el-form",{ref:"form",attrs:{inline:"",model:e.codeForm,"label-width":"120px","label-position":"left"}},[o("el-form-item",{attrs:{prop:"id",label:"id"}},[o("el-input",{attrs:{disabled:""},model:{value:e.codeForm.id,callback:function(t){e.$set(e.codeForm,"id",t)},expression:"codeForm.id"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"module",label:"模块标识",required:""}},[o("el-input",{model:{value:e.codeForm.module,callback:function(t){e.$set(e.codeForm,"module",t)},expression:"codeForm.module"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"tableName",label:"表名",required:""}},[o("common-select",{attrs:{url:e.tableNameUrl,filterable:"",placeholder:"请选择表名"},model:{value:e.codeForm.tableName,callback:function(t){e.$set(e.codeForm,"tableName",t)},expression:"codeForm.tableName"}},e._l(e.tables,function(e){return o("el-option",{key:e.table_name,attrs:{label:e.table_name,value:e.table_name}})}))],1),e._v(" "),o("el-form-item",{attrs:{prop:"genType",label:"代码类型",required:""}},[o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              增&改: controller中带有增加和更改记录的请求"),o("br"),e._v("\n              删: controller中带有删除记录的请求"),o("br"),e._v("\n              分页列表: controller中带有分页查询的请求"),o("br"),e._v("\n              不分列表: controller中带有不分页查询列表的请求"),o("br")]),e._v(" "),o("el-select",{attrs:{multiple:"",placeholder:"请选择代码类型"},model:{value:e.codeForm.genType,callback:function(t){e.$set(e.codeForm,"genType",t)},expression:"codeForm.genType"}},[o("el-option",{key:"addAndUpdate",attrs:{label:"增&改",value:"addAndUpdate"}}),e._v(" "),o("el-option",{key:"del",attrs:{label:"删",value:"del"}}),e._v(" "),o("el-option",{key:"selectPager",attrs:{label:"分页列表",value:"selectPager"}}),e._v(" "),o("el-option",{key:"selectList",attrs:{label:"不分列表",value:"selectList"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"author",label:"作者",required:""}},[o("el-input",{model:{value:e.codeForm.author,callback:function(t){e.$set(e.codeForm,"author",t)},expression:"codeForm.author"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"outpath",label:"代码输出路径",required:""}},[o("el-input",{model:{value:e.codeForm.outpath,callback:function(t){e.$set(e.codeForm,"outpath",t)},expression:"codeForm.outpath"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"datasourceId",label:"数据源Id",required:""}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.codeForm.datasourceId,callback:function(t){e.$set(e.codeForm,"datasourceId",t)},expression:"codeForm.datasourceId"}},e._l(e.dataSources,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[o("span",[e._v(e._s(t.name))]),e._v(" "),o("span",[e._v(e._s(t.url))]),e._v(" "),o("span",[e._v(e._s(t.username)+":"+e._s(t.password))])])}))],1),e._v(" "),o("el-form-item",[o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd("dataSourceForm","dataSourceWindow")}}},[e._v("添加/修改/删除数据源")])],1),e._v(" "),o("el-form-item",{attrs:{prop:"queryParams",label:"查询参数"}},[o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              参数示例说明:"),o("br"),e._v("\n              主要对于查询列表的参数进行设置 分页列表(selectPager) 不分列表(selectList) "),o("br"),e._v("\n              查询类型::查询字段@@模糊查询(like)还是等值判断(eq) 多个查询条件用 ',' 隔开 多种查询类型用'|||'隔开"),o("br"),e._v("\n              selectPager::user_name@@like,user_enable@@eq "),o("br")]),e._v(" "),o("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:3,placeholder:"selectPager::user_name@@like,user_enable@@eq"},model:{value:e.codeForm.queryParams,callback:function(t){e.$set(e.codeForm,"queryParams",t)},expression:"codeForm.queryParams"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"createtime",label:"创建时间"}},[o("el-input",{attrs:{disabled:""},model:{value:e.codeForm.createtime,callback:function(t){e.$set(e.codeForm,"createtime",t)},expression:"codeForm.createtime"}})],1),e._v(" "),o("el-form-item",[o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("保存")]),e._v(" "),o("common-button",{attrs:{type:"primary"}},[e._v("取消")])],1)],1)],1),e._v(" "),o("el-card",[o("common-table",{ref:"table",attrs:{height:"58vh",url:e.url,columns:e.columns,fit:"",autoLoad:"",formOptions:e.formOptions},on:{"select-all":e.handleSelect,select:e.handleSelect},scopedSlots:e._u([{key:"edit",fn:function(t){return[o("common-button",{on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("common-button",{attrs:{type:"danger"},on:{click:function(o){e.hanleDel(t.row)}}},[e._v("删除")])]}},{key:"buttons",fn:function(t){return[o("div",{staticStyle:{"margin-top":"1"}},[o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd("form","addWindow")}}},[e._v("新增")]),e._v(" "),o("common-button",{attrs:{type:"primary"},on:{click:function(t){e.generateCode()}}},[e._v("生成代码")])],1)]}}])})],1)],1)},staticRenderFns:[]},d=o("VU/8")(n,s,!1,null,null,null);t.default=d.exports}});