webpackJsonp([54],{sxVZ:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("Dd8w"),s=l.n(o),r=l("NYxO"),a={name:"ConsultList",components:{consultManager:l("p3JC").default},data:function(){return{window:{addWindow:!1,watchFlow:!1,moreSearch:!1},img:{baseFlowImgUrl:this.baseUrl+"/activiti/getFlowImage",watchFlowImg:""},data:{consult:{},operate:"",selectedIds:""},select:{zxly:{url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sources"},zxlylx:{url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sourcesType"},khlx:{url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=khlx"},sf:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=1"},cs:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=2"},fpks:{url:"system/proxyExcute?uuid=343d1975-5604-4041-9c07-4431b6742658"}},moreSearch:{},table:{consult:{formOptions:{labelWidth:120,itemWidth:150,inline:!0,showResetBtn:!0,showSearchBtn:!0,submitBtnText:"查询",resetBtnText:"重置",forms:[{prop:"starttime",itemType:"date",dateType:"start",label:"咨询开始时间"},{prop:"endtime",itemType:"date",dateType:"end",label:"咨询结束时间"},{prop:"zxly",label:"咨询来源",itemType:"select",url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sources",filterable:!0},{prop:"zxlylx",label:"咨询类型",itemType:"select",url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sourcesType",filterable:!0},{prop:"khlx",label:"客户类型",itemType:"select",url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=khlx",filterable:!0},{prop:"sf",label:"所在省份",itemType:"select",url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=1",filterable:!0},{prop:"cs",label:"城市",itemType:"select",url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=2",filterable:!0},{prop:"fpks",label:"分配科室",itemType:"select",url:"system/proxyExcute?uuid=343d1975-5604-4041-9c07-4431b6742658",filterable:!0},{prop:"zxbh",label:"咨询编号"},{prop:"qymc",label:"企业名称"},{prop:"khmc",label:"客户名称"},{prop:"sj",label:"手机"},{prop:"zj",label:"座机"},{prop:"email",label:"邮箱"},{prop:"qq",label:"QQ"},{prop:"wechat",label:"微信"},{prop:"remark",label:"备注"},{prop:"ypname",label:"样品名称"},{prop:"jcxm",label:"检测项目"}]},url:"consult/getMyConsultByPager",columns:[{colType:"selection"},{prop:"zxbh",label:"咨询编号",width:170,showOverflowTooltip:!0},{prop:"createtime",label:"咨询时间",width:140},{prop:"zxlyname",label:"咨询来源",width:150},{prop:"zxlylxname",label:"咨询类型"},{prop:"qymc",label:"企业名称",width:180,showOverflowTooltip:!0},{prop:"jcxm",label:"咨询内容",width:240,showOverflowTooltip:!0},{prop:"kfrymc",label:"客服人员"},{prop:"fpksmc",label:"分配科室",width:200},{prop:"xsrymc",label:"销售人员"},{prop:"zxztname",slotName:"zxzt",width:100,label:"咨询状态"},{prop:"thyy",label:"退回原因",showOverflowTooltip:!0},{slotName:"operate",width:250}]}}}},computed:s()({},Object(r.b)(["consultEditWindowShow"])),methods:{refreshTable:function(){this.setWindowStatus(!1),this.$refs.table.searchHandler()},pushSelected:function(e,t){this.$set(this.data,"selectedIds",e.map(function(e){return e.id}))},checkboxFun:function(e,t){return"1"!==e.istj},commitSelected:function(){var e=this;this.data.selectedIds?this.$request({url:"consult/commitXmxxZxxx",method:"post",params:{ids:this.data.selectedIds.toString()}}).then(function(t){e.returnMsg(e,t),e.$refs.table.searchHandler()}):this.$message({message:"请选择要提交的咨询",type:"error"})},edit:function(e,t){this.$set(this.data,"consult",e),this.$set(this.data,"operate",t),this.setWindowStatus(!0)},setWindowStatus:function(e){this.$store.dispatch("setShowEditWindow",e)},showWatchFlow:function(e){this.$set(this.img,"watchFlowImg",this.img.baseFlowImgUrl+"?id="+e.insid+"&"+new Date),this.window.watchFlow=!0},getCs:function(e,t){this.$set(this.moreSearch,"cs",""),this.$refs.cs.loadData("pid="+t)},doSearch:function(){this.$refs.table.searchHandler(),this.window.moreSearch=!1},resetSearch:function(){this.$set(this,"moreSearch",{}),this.$refs.consult.resetFields(),console.log(this.$refs.table.$refs.searchForm.$refs.form,"ff"),this.$refs.table.$refs.searchForm.$refs.form.resetFields()}}},c={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-dialog",{attrs:{title:"咨询信息",fullscreen:"",visible:e.consultEditWindowShow,width:"100%"},on:{"update:visible":function(t){e.consultEditWindowShow=t},close:function(t){e.refreshTable()}}},[l("consultManager",{attrs:{editConsult:e.data.consult,from:"window",operate:e.data.operate}})],1),e._v(" "),l("el-dialog",{attrs:{title:"咨询流程",visible:e.window.watchFlow},on:{"update:visible":function(t){e.$set(e.window,"watchFlow",t)}}},[l("img",{staticStyle:{width:"100%"},attrs:{src:e.img.watchFlowImg}})]),e._v(" "),l("common-table",{ref:"table",attrs:{autoLoad:"",params:e.moreSearch,"show-overflow-tooltip":"",url:e.table.consult.url,formOptions:e.table.consult.formOptions,columns:e.table.consult.columns,checkboxFun:e.checkboxFun,fit:""},on:{select:e.pushSelected},scopedSlots:e._u([{key:"buttons",fn:function(t){return[l("common-button",{attrs:{svgIcon:"commit",type:"primary",plain:""},on:{click:e.commitSelected}},[e._v("提交")])]}},{key:"zxzt",fn:function(t){return[l("span",{style:{color:"8"===t.row.zxzt?"red":""}},[e._v(e._s(t.row.zxztname))])]}},{key:"operate",fn:function(t){return[""===t.row.istj||null===t.row.istj||"2"===t.row.zxzt?l("common-button",{attrs:{type:"primary"},on:{click:function(l){e.edit(t.row,"edit")}}},[e._v("编辑")]):l("common-button",{attrs:{type:"primary"},on:{click:function(l){e.edit(t.row,"watch")}}},[e._v("查看")])]}}])})],1)},staticRenderFns:[]},i=l("VU/8")(a,c,!1,null,null,null);t.default=i.exports}});