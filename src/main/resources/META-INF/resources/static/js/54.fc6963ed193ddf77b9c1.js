webpackJsonp([54],{sxVZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r("Dd8w"),o=r.n(l),a=r("NYxO"),s={name:"ConsultList",components:{consultManager:r("p3JC").default},data:function(){return{window:{addWindow:!1,watchFlow:!1,moreSearch:!1},img:{baseFlowImgUrl:this.baseUrl+"/activiti/getFlowImage",watchFlowImg:""},data:{consult:{},operate:"",selectedIds:""},select:{zxly:{url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sources"},zxlylx:{url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=sourcesType"},khlx:{url:"system/proxyExcute?uuid=5a20cceb-ce98-4377-b6c1-958c1a1c0ff3&type=khlx"},sf:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=1"},cs:{url:"system/proxyExcute?uuid=1faf1d01-88ed-4e8e-8975-7eaa2c179135&level=2"},fpks:{url:"system/proxyExcute?uuid=343d1975-5604-4041-9c07-4431b6742658"}},moreSearch:{},table:{consult:{formOptions:{formType:"simple",inline:!0,showResetBtn:!0,showSearchBtn:!0,submitBtnText:"查询",resetBtnText:"重置",forms:[{prop:"starttime",itemType:"date",dateType:"start",label:"咨询开始时间"},{prop:"endtime",itemType:"date",dateType:"end",label:"咨询结束时间"},{prop:"qymc",label:"企业名称"},{prop:"sj",label:"手机"}]},url:"consult/getMyConsultByPager",columns:[{colType:"selection"},{prop:"zxbh",label:"咨询编号",width:170,showOverflowTooltip:!0},{prop:"createtime",label:"咨询时间",width:140},{prop:"zxlyname",label:"咨询来源",width:150},{prop:"zxlylxname",label:"咨询类型"},{prop:"qymc",label:"企业名称",width:180,showOverflowTooltip:!0},{prop:"jcxm",label:"咨询内容",width:240,showOverflowTooltip:!0},{prop:"kfrymc",label:"客服人员"},{prop:"fpksmc",label:"分配科室",width:200},{prop:"xsrymc",label:"销售人员"},{prop:"zxztname",slotName:"zxzt",width:100,label:"咨询状态"},{prop:"thyy",label:"退回原因",showOverflowTooltip:!0},{slotName:"operate",width:250}]}}}},computed:o()({},Object(a.b)(["consultEditWindowShow"])),methods:{refreshTable:function(){this.setWindowStatus(!1),this.$refs.table.searchHandler()},pushSelected:function(e,t){this.$set(this.data,"selectedIds",e.map(function(e){return e.id}))},checkboxFun:function(e,t){return"1"!==e.istj},commitSelected:function(){var e=this;this.data.selectedIds?this.$request({url:"consult/commitXmxxZxxx",method:"post",params:{ids:this.data.selectedIds.toString()}}).then(function(t){e.returnMsg(e,t),e.$refs.table.searchHandler()}):this.$message({message:"请选择要提交的咨询",type:"error"})},edit:function(e,t){this.$set(this.data,"consult",e),this.$set(this.data,"operate",t),this.setWindowStatus(!0)},setWindowStatus:function(e){this.$store.dispatch("setShowEditWindow",e)},showWatchFlow:function(e){this.$set(this.img,"watchFlowImg",this.img.baseFlowImgUrl+"?id="+e.insid+"&"+new Date),this.window.watchFlow=!0},getCs:function(e,t){this.$set(this.moreSearch,"cs",""),this.$refs.cs.loadData("pid="+t)},doSearch:function(){this.$refs.table.searchHandler(),this.window.moreSearch=!1},resetSearch:function(){this.$set(this,"moreSearch",{}),this.$refs.consult.resetFields(),console.log(this.$refs.table.$refs.searchForm.$refs.form,"ff"),this.$refs.table.$refs.searchForm.$refs.form.resetFields()}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"咨询信息",fullscreen:"",visible:e.consultEditWindowShow,width:"100%"},on:{"update:visible":function(t){e.consultEditWindowShow=t},close:function(t){e.refreshTable()}}},[r("consultManager",{attrs:{editConsult:e.data.consult,from:"window",operate:e.data.operate}})],1),e._v(" "),r("el-dialog",{attrs:{title:"咨询流程",visible:e.window.watchFlow},on:{"update:visible":function(t){e.$set(e.window,"watchFlow",t)}}},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.img.watchFlowImg}})]),e._v(" "),r("el-dialog",{attrs:{title:"更多查询",visible:e.window.moreSearch},on:{"update:visible":function(t){e.$set(e.window,"moreSearch",t)}}},[r("el-form",{ref:"consult",attrs:{model:e.moreSearch,"label-width":"90px"}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"咨询来源",prop:"zxly"}},[r("common-select",{ref:"zxlyname",attrs:{url:e.select.zxly.url,filterable:""},model:{value:e.moreSearch.zxly,callback:function(t){e.$set(e.moreSearch,"zxly",t)},expression:"moreSearch.zxly"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{ref:"zxlylx",attrs:{label:"咨询类型",prop:"zxlylx"}},[r("common-select",{ref:"zxlylxname",attrs:{url:e.select.zxlylx.url,filterable:""},model:{value:e.moreSearch.zxlylx,callback:function(t){e.$set(e.moreSearch,"zxlylx",t)},expression:"moreSearch.zxlylx"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"客户类型",prop:"khlx"}},[r("common-select",{attrs:{url:e.select.khlx.url,filterable:""},model:{value:e.moreSearch.khlx,callback:function(t){e.$set(e.moreSearch,"khlx",t)},expression:"moreSearch.khlx"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"所在省份",prop:"sf"}},[r("common-select",{attrs:{url:e.select.sf.url},on:{change:e.getCs},model:{value:e.moreSearch.sf,callback:function(t){e.$set(e.moreSearch,"sf",t)},expression:"moreSearch.sf"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"城市",prop:"cs"}},[r("common-select",{ref:"cs",attrs:{cascadingValue:e.moreSearch.sf,cascadingKey:"pid",url:e.select.cs.url},model:{value:e.moreSearch.cs,callback:function(t){e.$set(e.moreSearch,"cs",t)},expression:"moreSearch.cs"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"分配科室",prop:"fpks"}},[r("common-select",{ref:"fpks",attrs:{filterable:"",url:e.select.fpks.url},model:{value:e.moreSearch.fpks,callback:function(t){e.$set(e.moreSearch,"fpks",t)},expression:"moreSearch.fpks"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"咨询编号",prop:"zxbh"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.zxbh,callback:function(t){e.$set(e.moreSearch,"zxbh",t)},expression:"moreSearch.zxbh"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{ref:"zxlylx",attrs:{label:"企业名称",prop:"qymc"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.qymc,callback:function(t){e.$set(e.moreSearch,"qymc",t)},expression:"moreSearch.qymc"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"客户名称",prop:"khmc"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.khmc,callback:function(t){e.$set(e.moreSearch,"khmc",t)},expression:"moreSearch.khmc"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"手机",prop:"sj"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.sj,callback:function(t){e.$set(e.moreSearch,"sj",t)},expression:"moreSearch.sj"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"座机",prop:"zj"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.zj,callback:function(t){e.$set(e.moreSearch,"zj",t)},expression:"moreSearch.zj"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.email,callback:function(t){e.$set(e.moreSearch,"email",t)},expression:"moreSearch.email"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.qq,callback:function(t){e.$set(e.moreSearch,"qq",t)},expression:"moreSearch.qq"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"微信",prop:"wechat"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.wechat,callback:function(t){e.$set(e.moreSearch,"wechat",t)},expression:"moreSearch.wechat"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.remark,callback:function(t){e.$set(e.moreSearch,"remark",t)},expression:"moreSearch.remark"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样品名称",prop:"ypname"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.ypname,callback:function(t){e.$set(e.moreSearch,"ypname",t)},expression:"moreSearch.ypname"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"检测项目",prop:"jcxm"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.moreSearch.jcxm,callback:function(t){e.$set(e.moreSearch,"jcxm",t)},expression:"moreSearch.jcxm"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{"text-align":"right"}},[r("common-button",{attrs:{svgIcon:"search",type:"primary"},on:{click:e.doSearch}},[e._v("查询")]),e._v(" "),r("common-button",{attrs:{svgIcon:"reset",type:"primary"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),r("common-table",{ref:"table",attrs:{autoLoad:"",params:e.moreSearch,"show-overflow-tooltip":"",url:e.table.consult.url,formOptions:e.table.consult.formOptions,columns:e.table.consult.columns,checkboxFun:e.checkboxFun,fit:""},on:{select:e.pushSelected},scopedSlots:e._u([{key:"topbutton",fn:function(t){return[r("common-button",{attrs:{svgIcon:"more",type:"primary",plain:""},on:{click:function(t){e.window.moreSearch=!0}}},[e._v("更多查询条件")])]}},{key:"buttons",fn:function(t){return[r("common-button",{attrs:{svgIcon:"commit",type:"primary",plain:""},on:{click:e.commitSelected}},[e._v("提交")])]}},{key:"zxzt",fn:function(t){return[r("span",{style:{color:"8"===t.row.zxzt?"red":""}},[e._v(e._s(t.row.zxztname))])]}},{key:"operate",fn:function(t){return[t.row.insid?r("common-button",{attrs:{type:"primary"},on:{click:function(r){e.showWatchFlow(t.row)}}},[e._v("查看咨询进程")]):e._e(),e._v(" "),""===t.row.istj||null===t.row.istj||"2"===t.row.zxzt?r("common-button",{attrs:{type:"primary"},on:{click:function(r){e.edit(t.row,"edit")}}},[e._v("编辑")]):r("common-button",{attrs:{type:"primary"},on:{click:function(r){e.edit(t.row,"watch")}}},[e._v("查看")])]}}])})],1)},staticRenderFns:[]},n=r("VU/8")(s,c,!1,null,null,null);t.default=n.exports}});